{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2>{{ movie.title }}</h2>
    <p><strong>Description:</strong> {{ movie.description }}</p>
    <p><strong>Release Year:</strong> {{ movie.release_year }}</p>
    <p><strong>Genre:</strong> {{ movie.genre }}</p>
    <p><strong>IMDb Rating:</strong> {{ movie.imdb_rating }}</p>
    {% if movie.poster_url %}
    <img src="{% static movie.poster_url %}" alt="{{ movie.title }} Poster" class="img-fluid">
    {% endif %}

    <div class="mt-4">
        <h3>Add a Review</h3>
        <form method="POST">
            {% csrf_token %}
            <div class="form-group">
                <label for="rating">Rating</label>
                <input type="number" class="form-control" id="rating" name="rating" min="1" max="10" required>
            </div>
            <div class="form-group">
                <label for="content">Content</label>
                <textarea class="form-control" id="content" name="content" rows="3" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Submit Review</button>
        </form>
    </div>

    <div class="mt-4">
        <h3>Reviews</h3>
        {% if reviews %}
        <ul>
            {% for review in reviews %}
            <li>
                <p><strong>Rating:</strong> {{ review.rating }}</p>
                <p><strong>Content:</strong> {{ review.content }}</p>
                <p><strong>User:</strong> {{ review.user.username }}</p>
                <p><strong>Date:</strong> {{ review.created_at }}</p>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No reviews yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}